<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generador de Historias Santa 3D (Standalone)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }

        .editable {
            border: 1px dashed rgba(255, 255, 255, 0.2);
            cursor: text;
            min-height: 1em;
        }

        .editable:focus {
            outline: 2px solid #F26B21;
            background: rgba(0, 0, 0, 0.2);
        }
    </style>
</head>

<body class="bg-gray-900 text-white min-h-screen p-8 flex flex-col items-center">

    <div class="max-w-6xl w-full flex justify-between items-center mb-8">
        <h1 class="text-3xl font-black text-[#F26B21] uppercase">Generador de Historias (Emergencia)</h1>
        <div class="flex gap-4">
            <button onclick="downloadImage()" id="btn-download"
                class="bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 shadow-lg transition-all active:scale-95">
                üì∏ Descargar PNG
            </button>
            <div class="flex gap-2">
                <button onclick="changeSlide(-1)"
                    class="p-3 bg-white text-black rounded-full shadow hover:bg-gray-200">‚óÄ</button>
                <span id="slide-counter"
                    class="font-mono font-bold bg-white text-black px-4 py-3 rounded-lg shadow-sm flex items-center">1 /
                    11</span>
                <button onclick="changeSlide(1)"
                    class="p-3 bg-white text-black rounded-full shadow hover:bg-gray-200">‚ñ∂</button>
            </div>
        </div>
    </div>

    <div class="text-center text-gray-400 mb-4">
        üí° <strong>TIP:</strong> Haz clic en cualquier texto dentro de la imagen para editarlo antes de descargar.
    </div>

    <!-- PREVIEW CONTAINER (Phone Aspect Ratio) -->
    <!-- We generate at 1080x1920 but scale it down for preview -->
    <div class="relative shadow-2xl rounded-3xl overflow-hidden border-8 border-gray-800 bg-black"
        style="width: 400px; height: 711px;">

        <!-- CANVAS (The actual content to capture) -->
        <!-- Content scaled down to fit 400px width (factor 0.37) -->
        <div id="story-canvas" class="origin-top-left bg-[#2a0a45] text-white overflow-hidden relative"
            style="width: 1080px; height: 1920px; transform: scale(0.37037);">

            <!-- GLOBAL DECORATION -->
            <div class="absolute top-0 inset-x-0 h-96 bg-gradient-to-b from-[#F26B21]/20 to-transparent blur-3xl"></div>
            <div class="absolute bottom-0 inset-x-0 h-96 bg-gradient-to-t from-[#4a1d75] to-transparent"></div>

            <!-- Top Branding -->
            <div class="absolute top-20 left-0 w-full text-center z-10">
                <div
                    class="inline-block px-12 py-3 bg-[#F26B21] text-white font-black text-2xl uppercase tracking-widest rounded-full shadow-lg">
                    Concurso Santa 3D
                </div>
            </div>

            <!-- DYNAMIC CONTENT AREA -->
            <div id="content-area" class="w-full h-full flex flex-col justify-center items-center p-20 relative z-20">
                <!-- Content injected via JS -->
            </div>

            <!-- Footer Branding -->
            <div class="absolute bottom-10 w-full text-center opacity-50">
                <p class="text-2xl font-bold tracking-[0.2em]">@CENTAUROADS</p>
            </div>

        </div>
    </div>

    <script>
        const MESSAGES = [
            {
                id: 1, type: "intro",
                title: "GRACIAS,<br>ARTISTAS VENEZOLANOS üíú",
                highlight: "15 VALIENTES",
                body1: "que se atrevieron a crear, innovar y compartir su talento.",
                body2: "Cada Santa 3D cuenta una historia √∫nica. Cada dise√±o refleja PASI√ìN y DEDICACI√ìN.",
                body3: "Ustedes son el FUTURO del arte digital.",
                footer: "TODOS son ganadores por PARTICIPAR.",
                hashtags: "#OrgulloVenezolano"
            },
            {
                id: 2, type: "process",
                header: "PROCESO DE EVALUACI√ìN",
                body: "Nuestro JURADO EXPERTO en arte 3D evalu√≥ cada dise√±o con CRITERIOS OBJETIVOS.",
                subtext: "Proceso 100% TRANSPARENTE basado en est√°ndares internacionales.",
                callToAction: "üéØ A continuaci√≥n, los criterios..."
            },
            {
                id: 3, type: "criteria",
                header: "CRITERIOS OFICIALES",
                scale: "Escala: 0-20 pts | M√°x: 100 pts",
                items: [
                    { t: "Creatividad y Originalidad", p: "20%" },
                    { t: "Calidad T√©cnica 3D", p: "30%" },
                    { t: "Impacto Visual", p: "20%" },
                    { t: "Identidad Venezolana", p: "20%" },
                    { t: "Narrativa/Storytelling", p: "10%" }
                ],
                footer: "¬°DESCUBRE LOS RESULTADOS! üèÜ"
            },
            {
                id: 4, type: "simple_msg",
                title: "POSICIONES #15-#11",
                main: "",
                body: "Su valent√≠a para participar ya es un TRIUNFO. El arte 3D es un viaje, y cada proyecto es un escal√≥n hacia la maestr√≠a. Esperamos verlos en el pr√≥ximo concurso m√°s preparados y confiados.",
                footer: "¬°SIGAN CREANDO! üí™üé®"
            },
            {
                id: 5, type: "simple_msg",
                title: "TOP 10 (#10-#6)",
                main: "¬°TOP 10 LOGRADO!",
                body: "Su talento destac√≥ y el jurado not√≥ sus fortalezas. Con un poco m√°s de pr√°ctica y t√©cnica, ser√°n IMPARABLES.",
                footer: "¬°Cuenten con nosotros! üöÄ"
            },
            {
                id: 6, type: "simple_msg",
                title: "SEMIFINALISTAS (#4-#6)",
                main: "¬°SEMIFINALISTAS!",
                body: "Su trabajo est√° a nivel PROFESIONAL. Estuvieron MUY CERCA del podio. El jurado qued√≥ impresionado con su t√©cnica y creatividad.",
                footer: "¬°Talento y ejemplo a seguir! üëè‚ú®"
            },
            {
                id: 7, type: "simple_msg",
                title: "CAMPEONES",
                main: "¬°PODIO DE HONOR!",
                body: "Sus posiciones son MUY MERECIDAS. Su trabajo representa lo MEJOR del arte 3D venezolano.",
                footer: "¬°ORGULLO NACIONAL! üèÜüéâ"
            },
            {
                id: 8, type: "winner",
                medal: "bronze",
                medalTitle: "MEDALLA DE BRONCE",
                name: "JONATHAN MOLEIRO",
                handle: "@Moleir0",
                alias: "moleiro",
                highlight: "ORIGINALIDAD CONCEPTUAL",
                msg: "Jonathan, tu CONCEPTO es FRESCO y √öNICO. Lograste algo dif√≠cil: sorprender al jurado con una propuesta INNOVADORA.",
                bullets: [],
                footer: "¬°FELICIDADES JONATHAN! ü•â"
            },
            {
                id: 9, type: "winner",
                medal: "silver",
                medalTitle: "MEDALLA DE PLATA",
                name: "SEBASTI√ÅN D√çAZ",
                handle: "@sebastiandiaz012",
                alias: "",
                highlight: "T√âCNICA 3D EXCEPCIONAL",
                msg: "Sebasti√°n, tu DOMINIO T√âCNICO es IMPRESIONANTE. Modelado, texturas, render... TODO a nivel PROFESIONAL.",
                bullets: ["Texturas fotorrealistas", "Geometr√≠a impecable", "Iluminaci√≥n cinematogr√°fica"],
                footer: "¬°FELICIDADES, PLATA! ü•à"
            },
            {
                id: 10, type: "winner",
                medal: "gold",
                medalTitle: "MEDALLA DE ORO",
                name: "YEFREN DELGADO",
                handle: "@yefrendelgado",
                alias: "",
                highlight: "BALANCE PERFECTO",
                msg: "Yefren, lograste el EQUILIBRIO ideal entre T√âCNICA, CREATIVIDAD e IMPACTO. Tu Santa es una obra MAESTRA.",
                bullets: ["Creatividad excepcional", "Identidad venezolana", "Narrativa emotiva"],
                footer: "¬°CAMPE√ìN 2026! üèÜüëë"
            },
            {
                id: 11, type: "outro",
                title: "GRACIAS, VENEZUELA",
                stats: ["15 ARTISTAS", "15 HISTORIAS"],
                body: "Juntos demostraron que el TALENTO venezolano no tiene l√≠mites. Este concurso es solo el COMIENZO de algo GRANDE.",
                callToAction: "¬øQuieres ser parte de la pr√≥xima?",
                actions: ["üëâ ACTIVA NOTIFICACIONES üîî", "üëâ S√çGUENOS @centauroads"],
                final: "¬°NOS VEMOS EN 2026! üöÄ"
            }
        ];

        let currentSlide = 0;

        function renderSlide() {
            const msg = MESSAGES[currentSlide];
            const container = document.getElementById('content-area');
            document.getElementById('slide-counter').innerText = `${currentSlide + 1} / ${MESSAGES.length}`;

            let html = '';

            // --- INTRO ---
            if (msg.type === 'intro') {
                html = `
                    <div class="text-center space-y-16">
                        <h1 contenteditable="true" class="editable text-8xl font-black text-[#F26B21] leading-tight drop-shadow-lg">${msg.title}</h1>
                        <div class="text-5xl font-bold leading-normal text-gray-100">
                             A los <span contenteditable="true" class="editable text-[#FDB913] text-7xl font-black block mt-4 mb-4">${msg.highlight}</span>
                             <span contenteditable="true" class="editable">${msg.body1}</span>
                        </div>
                        <div class="space-y-8 bg-[#4a1d75]/50 p-10 rounded-3xl border border-white/10 backdrop-blur-sm">
                            <p contenteditable="true" class="editable text-4xl font-medium leading-relaxed">${msg.body2}</p>
                            <p contenteditable="true" class="editable text-4xl font-medium leading-relaxed text-[#FDB913]">${msg.body3}</p>
                        </div>
                        <div class="pt-10">
                            <p contenteditable="true" class="editable text-5xl font-black uppercase text-white mb-8 tracking-wide">${msg.footer}</p>
                            <p contenteditable="true" class="editable text-3xl font-bold text-[#F26B21]/80">${msg.hashtags}</p>
                        </div>
                    </div>
                `;
            }

            // --- PROCESS ---
            else if (msg.type === 'process') {
                html = `
                     <div class="text-center space-y-20">
                        <h2 contenteditable="true" class="editable text-7xl font-black uppercase tracking-tight bg-white/10 inline-block px-12 py-6 rounded-2xl">${msg.header}</h2>
                        <p contenteditable="true" class="editable text-5xl leading-normal font-medium max-w-4xl mx-auto">${msg.body}</p>
                        <div class="h-1 w-64 bg-gradient-to-r from-transparent via-[#FDB913] to-transparent mx-auto"></div>
                        <p contenteditable="true" class="editable text-4xl italic text-gray-300 max-w-3xl mx-auto">${msg.subtext}</p>
                        <div class="bg-[#F26B21] text-white p-10 rounded-3xl mt-12 shadow-2xl">
                            <p contenteditable="true" class="editable text-4xl font-black uppercase">${msg.callToAction}</p>
                        </div>
                    </div>
                `;
            }

            // --- CRITERIA ---
            else if (msg.type === 'criteria') {
                html = `
                    <div class="text-center w-full">
                        <div class="mb-16">
                            <h2 contenteditable="true" class="editable text-6xl font-black uppercase mb-4 text-[#FDB913]">${msg.header}</h2>
                            <p contenteditable="true" class="editable text-3xl font-mono text-gray-400 bg-black/30 inline-block px-6 py-2 rounded-lg">${msg.scale}</p>
                        </div>
                        <div class="space-y-8 w-full max-w-3xl mx-auto">
                            ${msg.items.map(item => `
                                <div class="flex items-center justify-between bg-[#4a1d75] p-8 rounded-2xl border border-white/5 shadow-lg">
                                    <span contenteditable="true" class="editable text-4xl font-bold text-left">${item.t}</span>
                                    <span contenteditable="true" class="editable text-5xl font-black text-[#FDB913]">${item.p}</span>
                                </div>
                            `).join('')}
                        </div>
                        <p contenteditable="true" class="editable mt-20 text-5xl font-black uppercase text-white">${msg.footer}</p>
                    </div>
                 `;
            }

            // --- SIMPLE MSG (RANKINGS) ---
            else if (msg.type === 'simple_msg') {
                html = `
                    <div class="text-center space-y-16 max-w-4xl relative z-10">
                        <!-- Background Blob (Moved inside but kept valid, relying on container z-index) -->
                        <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[1200px] h-[1200px] bg-gradient-to-r from-[#F26B21]/10 to-[#FDB913]/10 rounded-full blur-[100px] pointer-events-none" style="z-index: -1;"></div>
                        
                        <div class="inline-block px-12 py-4 bg-white/10 backdrop-blur-md rounded-full border border-white/20 mb-10 relative z-20">
                            <h3 contenteditable="true" class="editable text-4xl font-black uppercase tracking-widest text-[#FDB913]">${msg.title}</h3>
                        </div>
                        
                        <!-- FIX: Removed bg-clip-text, using solid Gold color for reliability in html2canvas -->
                        ${msg.main ? `<h1 contenteditable="true" class="editable text-9xl font-black uppercase text-[#FDB913] drop-shadow-2xl mb-12 relative z-20">${msg.main}</h1>` : ''}
                        
                        <div class="bg-[#2a0a45] p-12 rounded-[40px] border-2 border-[#4a1d75] shadow-2xl relative z-20">
                            <p contenteditable="true" class="editable text-5xl leading-relaxed font-medium text-gray-100">${msg.body}</p>
                        </div>
                        <p contenteditable="true" class="editable text-4xl font-black text-[#F26B21] uppercase tracking-wide pt-8 relative z-20">${msg.footer}</p>
                    </div>
                `;
            }

            // --- WINNERS ---
            else if (msg.type === 'winner') {
                let color = msg.medal === 'gold' ? '#FFD700' : (msg.medal === 'silver' ? '#E0E0E0' : '#CD7F32');
                let emoji = msg.medal === 'gold' ? 'üèÜ' : (msg.medal === 'silver' ? 'ü•à' : 'ü•â');

                html = `
                    <div class="text-center w-full max-w-5xl relative">
                        <div class="mb-12 flex flex-col items-center justify-center">
                            <div class="w-64 h-64 rounded-full flex items-center justify-center text-9xl" style="background: linear-gradient(135deg, ${color}, #333); box-shadow: 0 0 100px ${color}aa;">${emoji}</div>
                            <div class="mt-8 px-8 py-3 bg-black/40 rounded-full border border-white/20">
                                <h3 contenteditable="true" class="editable text-4xl font-black uppercase tracking-widest text-[${color}]">${msg.medalTitle}</h3>
                            </div>
                        </div>
                        <div class="mb-16">
                            <h1 contenteditable="true" class="editable text-7xl font-black uppercase mb-4 leading-tight">${msg.name}</h1>
                            <p contenteditable="true" class="editable text-5xl font-bold text-[#FDB913] mb-2">${msg.handle}</p>
                            ${msg.alias ? `<p contenteditable="true" class="editable text-3xl font-mono text-gray-400 uppercase">${msg.alias}</p>` : ''}
                        </div>
                        <div class="bg-white/10 backdrop-blur-md rounded-3xl p-10 border-l-8 border-[#F26B21] mb-12 text-left shadow-xl">
                            <div>
                                <span class="text-2xl uppercase font-bold text-gray-400 block pt-4">Destac√≥ en:</span>
                                <span contenteditable="true" class="editable text-4xl font-black uppercase text-white">${msg.highlight}</span>
                            </div>
                            <p contenteditable="true" class="editable text-4xl leading-relaxed italic text-gray-100 mt-6 border-t border-white/10 pt-6">"${msg.msg}"</p>
                        </div>
                        ${msg.bullets.length ? `
                            <div class="bg-black/30 rounded-3xl p-10 mb-10 text-left">
                                ${msg.bullets.map(b => `<div class="flex items-center gap-4 text-3xl font-medium mb-2"><span class="text-[#FDB913]">‚ú®</span> <span contenteditable="true" class="editable">${b}</span></div>`).join('')}
                            </div>
                        ` : ''}
                        <div class="px-10 py-6 bg-gradient-to-r from-[#F26B21] to-[#FDB913] rounded-full inline-block shadow-lg">
                            <p contenteditable="true" class="editable text-4xl font-black uppercase text-black">${msg.footer}</p>
                        </div>
                    </div>
                 `;
            }

            // --- OUTRO ---
            else if (msg.type === 'outro') {
                html = `
                    <div class="text-center w-full relative z-10">
                        <h1 contenteditable="true" class="editable text-7xl font-black text-[#FDB913] mb-12 uppercase drop-shadow-md">${msg.title}</h1>
                        <div class="grid grid-cols-2 gap-4 mb-14">
                            ${msg.stats.map(s => `
                                <div class="bg-white/10 backdrop-blur rounded-2xl p-6 border border-white/10">
                                    <p contenteditable="true" class="editable text-3xl font-black leading-tight uppercase text-gray-300">${s}</p>
                                </div>
                            `).join('')}
                        </div>
                        <p contenteditable="true" class="editable text-4xl font-medium leading-relaxed mb-12 max-w-3xl mx-auto">${msg.body}</p>
                        <div class="space-y-6">
                            <p contenteditable="true" class="editable text-3xl font-bold uppercase">${msg.callToAction}</p>
                            <div class="flex flex-col gap-4 max-w-2xl mx-auto">
                                ${msg.actions.map(act => `<div contenteditable="true" class="editable bg-white text-[#2a0a45] font-black text-2xl py-4 px-8 rounded-full shadow-lg">${act}</div>`).join('')}
                            </div>
                        </div>
                        <p contenteditable="true" class="editable mt-16 text-6xl font-black text-[#F26B21] uppercase tracking-tighter">${msg.final}</p>
                    </div>
                `;
            }

            container.innerHTML = html;
        }

        function changeSlide(dir) {
            currentSlide = (currentSlide + dir + MESSAGES.length) % MESSAGES.length;
            renderSlide();
        }

        async function downloadImage() {
            const btn = document.getElementById('btn-download');
            const element = document.getElementById('story-canvas');

            btn.innerText = "‚è≥ Generando...";
            btn.disabled = true;

            try {
                // IMPORTANT: Use html2canvas from CDN
                const canvas = await html2canvas(element, {
                    scale: 2, // High resolution
                    useCORS: true,
                    backgroundColor: '#2a0a45'
                });

                const link = document.createElement('a');
                link.download = `story_template_${currentSlide + 1}.png`;
                link.href = canvas.toDataURL('image/png');
                link.click();
            } catch (err) {
                console.error(err);
                alert("Error generando imagen: " + err.message);
            } finally {
                btn.innerText = "üì∏ Descargar PNG";
                btn.disabled = false;
            }
        }

        // Initialize
        renderSlide();
    </script>
</body>

</html>